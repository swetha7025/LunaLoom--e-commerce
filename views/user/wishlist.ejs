<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Wishlist</title>

    <link rel="icon" href="/img/favicon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Animation and carousel -->
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">

    <!-- Font Awesome & Icons -->
    <link rel="stylesheet" href="/css/all.css">
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/themify-icons.css">

    <!-- Popup & Slider -->
    <link rel="stylesheet" href="/css/magnific-popup.css">
    <link rel="stylesheet" href="/css/slick.css">

    <!-- Shared and page-specific CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/wishlist.css">
</head>

<body>

<%- include('../partials/header') %>

<section class="wishlist-hero-section">
    <div class="container">
        <h2>Your Wishlist</h2>
    </div>
</section>

<div class="container mt-4">

    <!-- SUCCESS MESSAGE -->
    <% if (success) { %>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <%= success %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    <% } %>

    <!-- ERROR MESSAGE -->
    <% if (error) { %>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <%= error %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    <% } %>


    <% if (!wishlist || !wishlist.products || wishlist.products.length === 0) { %>

        <div class="empty-box">
            Your wishlist is empty.
        </div>

    <% } else { %>

        <div class="wishlist-container">

            <% wishlist.products.forEach(item => { %>
                <% const product = item.productId; %>

                <div class="wishlist-card">

                    <!-- Product Image -->
                    <img src="<%= product.images && product.images.length > 0 ? product.images[0] : '/img/no-image.png' %>"
                         alt="Product Image">

                    <h5 class="mt-3"><%= product.name %></h5>
                    <p class="text-muted"><%= product.category %></p>
                    <p class="fw-bold">â‚¹ <%= product.price %></p>

                    <a href="/product/<%= product._id %>" class="btn btn-primary btn-sm mt-2">
                        View Product
                    </a>

                    <!-- Remove Button -->
                    <form action="/wishlist/remove/<%= product._id %>" method="POST">
                        <button class="btn-remove">Remove</button>
                    </form>

                </div>
            <% }) %>

        </div>

    <% } %>

</div>

<%- include('../partials/footer') %>

<!-- Bootstrap JS for close button -->
<script src="/js/bootstrap.bundle.min.js"></script>

</body>
</html>
